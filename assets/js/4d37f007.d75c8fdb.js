"use strict";(self.webpackChunkelegantota_docs=self.webpackChunkelegantota_docs||[]).push([[361],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=a,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return n?r.createElement(f,i(i({ref:t},c),{},{components:n})):r.createElement(f,i({ref:t},c))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7280:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const o={title:"Async Mode",sidebar_label:"Async Mode",sidebar_position:7},i=void 0,l={unversionedId:"async-mode",id:"async-mode",title:"Async Mode",description:"Introduction",source:"@site/docs/async-mode.md",sourceDirName:".",slug:"/async-mode",permalink:"/async-mode",draft:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"Async Mode",sidebar_label:"Async Mode",sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Callbacks",permalink:"/callbacks"},next:{title:"Disable Firmware OTA (Pro)",permalink:"/disable-firmware-ota"}},s={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Dependencies",id:"dependencies",level:3},{value:"For ESP8266",id:"for-esp8266",level:4},{value:"For ESP32",id:"for-esp32",level:4},{value:"For RP2040+W",id:"for-rp2040w",level:4},{value:"Enabling Async Mode",id:"enabling-async-mode",level:3},{value:"For Arduino IDE",id:"for-arduino-ide",level:4},{value:"For PlatformIO",id:"for-platformio",level:4},{value:"Benefits of Async Mode",id:"benefits-of-async-mode",level:3}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"One of the features of ElegantOTA is the async mode, which provides asynchronous web server functionality for handling OTA updates. This mode should only be enabled if you are using ESPAsyncWebServer library in your project/firmware."),(0,a.kt)("h3",{id:"dependencies"},"Dependencies"),(0,a.kt)("h4",{id:"for-esp8266"},"For ESP8266"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"(mathieucarbou) ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/mathieucarbou/esphome-ESPAsyncTCP#v2.0.0"},"esphome-ESPAsyncTCP")," - ",(0,a.kt)("strong",{parentName:"li"},"v2.0.0")),(0,a.kt)("li",{parentName:"ul"},"(mathieucarbou) ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/mathieucarbou/ESPAsyncWebServer#v3.0.5"},"ESPAsyncWebServer")," - ",(0,a.kt)("strong",{parentName:"li"},"v3.0.5"))),(0,a.kt)("h4",{id:"for-esp32"},"For ESP32"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"(mathieucarbou) ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/mathieucarbou/AsyncTCP#v3.1.4"},"AsyncTCP")," @ ",(0,a.kt)("strong",{parentName:"li"},"v3.1.4")),(0,a.kt)("li",{parentName:"ul"},"(mathieucarbou) ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/mathieucarbou/ESPAsyncWebServer#v3.0.5"},"ESPAsyncWebServer")," - ",(0,a.kt)("strong",{parentName:"li"},"v3.0.5"))),(0,a.kt)("h4",{id:"for-rp2040w"},"For RP2040+W"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"(khoih-prog) ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/khoih-prog/AsyncTCP_RP2040W#v1.2.0"},"AsyncTCP_RP2040W")," @ ",(0,a.kt)("strong",{parentName:"li"},"v1.2.0")),(0,a.kt)("li",{parentName:"ul"},"(mathieucarbou) ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/mathieucarbou/ESPAsyncWebServer#v3.0.5"},"ESPAsyncWebServer")," - ",(0,a.kt)("strong",{parentName:"li"},"v3.0.5"))),(0,a.kt)("h3",{id:"enabling-async-mode"},"Enabling Async Mode"),(0,a.kt)("h4",{id:"for-arduino-ide"},"For Arduino IDE"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Go to your Arduino libraries directory")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Open ",(0,a.kt)("inlineCode",{parentName:"p"},"ElegantOTA")," folder and then open ",(0,a.kt)("inlineCode",{parentName:"p"},"src")," folder")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Locate the ",(0,a.kt)("inlineCode",{parentName:"p"},"ELEGANTOTA_USE_ASYNC_WEBSERVER")," macro in the ",(0,a.kt)("inlineCode",{parentName:"p"},"ElegantOTA.h")," file, and set it to ",(0,a.kt)("inlineCode",{parentName:"p"},"1"),":"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},"#define ELEGANTOTA_USE_ASYNC_WEBSERVER 1\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Save the changes to the ",(0,a.kt)("inlineCode",{parentName:"p"},"ElegantOTA.h")," file.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"You are now ready to use ElegantOTA in async mode for your OTA updates, utilizing the ESPAsyncWebServer library."))),(0,a.kt)("h4",{id:"for-platformio"},"For PlatformIO"),(0,a.kt)("p",null,"If you use PlatformIO then we can use a neat trick! You can set ",(0,a.kt)("inlineCode",{parentName:"p"},"build_flags")," in your ",(0,a.kt)("inlineCode",{parentName:"p"},"platformio.ini")," file that enables Async Mode of ElegantOTA."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Open ",(0,a.kt)("inlineCode",{parentName:"li"},"platformio.ini")," file of your project"),(0,a.kt)("li",{parentName:"ol"},"Paste this line ",(0,a.kt)("inlineCode",{parentName:"li"},"build_flags=-DELEGANTOTA_USE_ASYNC_WEBSERVER=1")," at bottom"),(0,a.kt)("li",{parentName:"ol"},"Done!")),(0,a.kt)("p",null,"PlatformIO will now compile ElegantOTA in Async Mode!"),(0,a.kt)("h3",{id:"benefits-of-async-mode"},"Benefits of Async Mode"),(0,a.kt)("p",null,"Enabling async mode for ElegantOTA offers several advantages:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Non-blocking Operation:")," In async mode, ElegantOTA leverages the asynchronous web server capabilities of ESPAsyncWebServer. This means that OTA updates won't block your device's main loop. It allows your device to continue executing other tasks while handling OTA updates in the background.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Improved Responsiveness:")," Your device can remain responsive to user interactions or other processes during OTA updates, ensuring a smoother user experience."))))}d.isMDXComponent=!0}}]);